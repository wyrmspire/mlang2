"""
NewTestVolBreakoutScanner Strategy
Generated by scripts/create_strategy.py
"""

from src.policy.scanners import Scanner, ScanResult
from src.features.state import MarketState
from src.features.pipeline import FeatureBundle
from typing import Dict, Any

class NewTestVolBreakoutScanner(Scanner):
    """
    TODO: Add description of your strategy here.
    """

    @property
    def scanner_id(self) -> str:
        return "new_test_vol_breakout"

    def scan(self, state: MarketState, features: FeatureBundle) -> ScanResult:
        """
        Check for entry conditions on every bar.
        
        Available data:
        - state.timestamp, state.current_price, state.last_close
        - features.indicators (RSI, EMA, etc.)
        """
        
        # Custom Logic for Volume Breakout
        # Buy on volume spike (fake implementation as vol logic is complex)
        
        triggered = False
        context = {}
        
        # Random trigger logic for testing
        if state.current_time.minute % 15 == 0:
            triggered = True
            context = {
                "direction": "LONG",
                "reason": "Volume Breakout",
                "entry_price": state.current_price
            }

        return ScanResult(
            scanner_id=self.scanner_id,
            triggered=triggered,
            context=context,
            score=1.0 if triggered else 0.0
        )
